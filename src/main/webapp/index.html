<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="bootstrap-4.5.2-dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="bootstrap-4.5.2-dist/js/jquery-slim.min.js"></script>
    <script src="bootstrap-4.5.2-dist/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>


    <title>PRJLAB</title>
    <link rel="stylesheet" href="stile.css" />
    <!--    -------------STILE DELLA PAGINA UTENTE (tabella)------------->

    <script>
        function notRegistered() {
            alert("Non sei registrato! \nEffettua il login per compiere quest'azione");
        }
        function prenota(x) {
            const elem = x;
            if (elem.innerText === "Prenota")
                elem.innerText = "Disdici prenotazione";
            else elem.innerText = "Prenota";

        }

    </script>


<body>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!--   -------------------------------------INIZIO SCHERMATA DI LOGIN-------------------------------------------    -->


<div id="loginScreen">
    <div v-if="setVisibleLogin==='0'" class="d-flex justify-content-center">
        {{setVisibleLogin}}
        <div class="col-8 col-lg-3">
            <h2 class="d-flex justify-content-center">Form di autenticazione

            </h2>
            <div>

                <h3 class="d-flex justify-content-center -->">Please sign in</h3>
                <form>
                    <label for="Username" class="sr-only">Username</label>
                    <input name="username" id="username" v-model="username" placeholder="User" class="form-control">

                    <label for="Password" class="sr-only">Password</label>
                    <input name="password" id="password" v-model="password" placeholder="Password" type="password"
                           class="form-control">

                    <div class="checkbox mb-3">
                        <label>
                            <input type="checkbox" value="remember-me"> Remember me
                        </label>
                    </div>
                    <button v-on:click="login(); /*getError();*/" class="btn btn-lg btn-primary btn-block" id="invia"

                            type="button" value="login">Sign in
                    </button>

                    <h3 v-if="loginError==='vero'">{{message}}</h3>
                    <!--
                    <div v-for="error in errorMessage"><p>{{error.result}}</p></div>
                    -->
                </form>
                <p class="mt-5 mb-3 text-muted d-flex justify-content-center">Lasciare vuoto per entrare come Guest
                </p>

            </div>
        </div>
    </div>

    <div id="setVisibleLogin" v-html="setVisibleLogin" class="outputTextArea"></div>




    <!--   --------------------------------FINE DELLA SCHERMATA DI LOGIN -----------------------------------------   -->

    <!--   ----------------------------INIZIO SCHERMATA UTENTI NON REGISTRATI--------------------------------------  -->
    <div v-if="setVisibleLogin==='1'" id="logoutNonRegistrato" class="logout">
        <button type="button" v-on:click=setVisibleLogin='0' class="btn btn-secondary"
                data-toggle="tooltip" data-placement="top" title="Tooltip on top">
            Log-in
        </button>
    </div>
    <div v-if="setVisibleLogin==='1'" id="userScreenNonRegistrato" class="row">
        <div class="column1">
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Seleziona</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton1UtenteNonRegistrato" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona materia
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterMateria()" class="dropdown-item" href="#">Azzera materia</a>
                                <a v-on:click="filterMateria(s.titolo)" class="dropdown-item" v-for="s in allSubjects">{{s.titolo}}</a>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton2UtenteNonRegistrato" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona professore
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterProf()" class="dropdown-item" href="#">Azzera professore</a>
                                <a v-on:click="filterProf(p.account)" class="dropdown-item" href="#" v-for="p in allProfs">{{p.nomeCognome}}</a>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton3UtenteNonRegistrato" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona giorno
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterData('')" class="dropdown-item" href="#">Azzera data</a>
                                <a v-on:click="filterData('07/03/2022')" class="dropdown-item" href="#">07/03/2022</a>
                                <a v-on:click="filterData('08/03/2022')" class="dropdown-item" href="#">08/03/2022</a>
                                <a v-on:click="filterData('09/03/2022')" class="dropdown-item" href="#">09/03/2022</a>
                                <a v-on:click="filterData('10/03/2022')" class="dropdown-item" href="#">10/03/2022</a>
                                <a v-on:click="filterData('11/03/2022')" class="dropdown-item" href="#">11/03/2022</a>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton4UtenteNonRegistrato" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona orario
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterSlot('')" class="dropdown-item" href="#">Azzera orario</a>
                                <a v-on:click="filterSlot('15:00-16:00')" class="dropdown-item" href="#">15:00-16:00</a>
                                <a v-on:click="filterSlot('16:00-17:00')" class="dropdown-item" href="#">16:00-17:00</a>
                                <a v-on:click="filterSlot('17:00-18:00')" class="dropdown-item" href="#">17:00-18:00</a>
                                <a v-on:click="filterSlot('18:00-19:00')" class="dropdown-item" href="#">18:00-19:00</a>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>

        </div>



        <div class="column2">
            <table class="table">
                <thead class="thead-light">
                <tr>
                    <!--  titoli della tabella  -->
                    <th scope="col">Materia</th>
                    <th scope="col">Professore</th>
                    <th scope="col">Giorno</th>
                    <th scope="col">Ora</th>
                    <th scope="col">Prenotazione</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="p in allPrenotations" v-if="dataValida(p.data)">
                    <td><div>{{p.corso}}</div></td>
                    <td><div>{{p.docente}}</div></td>
                    <td><div>{{p.data}}</div></td>
                    <td><div>{{p.slot_ora}}</div></td>
                    <td><div v-if="p.stato === '0'">Libera</div>
                        <div v-if="p.stato === '1'">Prenotata</div>
                        <div v-if="p.stato === '1'">Effettuata</div>
                    </td>
                    <td><button type="button" class="btn btn-primary" v-if="p.stato === '0'" disabled>Prenota</button>
                        <button type="button" class="btn btn-primary" v-if="p.stato === '1'" disabled>Disdici prenotazione</button>

                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!--  ------------------------------INIZIO SCHERMATA UTENTI REGISTRATI-----------------------------------------  -->

    <div v-if="setVisibleLogin==='2'" id="logoutUtenteRegistrato" class="logout">

        <button type="button" v-on:click="setVisibleLogin='0'; registeredUserLogout()" class="btn btn-secondary"
                data-toggle="tooltip" data-placement="top" title="Tooltip on top">
            Logout
        </button>
    </div>

        <div v-if="setVisibleStorico==='1' && setVisibleLogin==='2'" class="column1" id="column1">
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Seleziona</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton1UtenteRegistrato" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona materia
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterMateria()" class="dropdown-item" href="#">Azzera materia</a>
                                <a v-on:click="filterMateria(s.titolo)" class="dropdown-item" v-for="s in allSubjects">{{s.titolo}}</a>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton2UtenteRegistrato" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona professore
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterProf()" class="dropdown-item" href="#">Azzera professore</a>
                                <a v-on:click="filterProf(p.account)" class="dropdown-item" href="#" v-for="p in allProfs">{{p.nomeCognome}}</a>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton3UtenteRegistrato" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona giorno
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterData('')" class="dropdown-item" href="#">Azzera data</a>
                                <a v-on:click="filterData('07/03/2022')" class="dropdown-item" href="#">07/03/2022</a>
                                <a v-on:click="filterData('08/03/2022')" class="dropdown-item" href="#">08/03/2022</a>
                                <a v-on:click="filterData('09/03/2022')" class="dropdown-item" href="#">09/03/2022</a>
                                <a v-on:click="filterData('10/03/2022')" class="dropdown-item" href="#">10/03/2022</a>
                                <a v-on:click="filterData('11/03/2022')" class="dropdown-item" href="#">11/03/2022</a>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton4UtenteRegistrato" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona orario
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterSlot('')" class="dropdown-item" href="#">Azzera orario</a>
                                <a v-on:click="filterSlot('15:00-16:00')" class="dropdown-item" href="#">15:00-16:00</a>
                                <a v-on:click="filterSlot('16:00-17:00')" class="dropdown-item" href="#">16:00-17:00</a>
                                <a v-on:click="filterSlot('17:00-18:00')" class="dropdown-item" href="#">17:00-18:00</a>
                                <a v-on:click="filterSlot('18:00-19:00')" class="dropdown-item" href="#">18:00-19:00</a>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button v-on:click="setVisibleStorico='2' ; getOwnActPrenotations()" type="button" id="StoricoUtenteRegistrato" class="btn btn-primary">Storico
                            Prenotazioni</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>



        <div v-if="setVisibleStorico==='1' && setVisibleLogin==='2'" class="column2" id="column2">
            <table class="table">
                <thead class="thead-light">
                <tr>
                    <!--  titoli della tabella  -->
                    <th scope="col">Materia</th>
                    <th scope="col">Professore</th>
                    <th scope="col">Giorno</th>
                    <th scope="col">Ora</th>
                    <th scope="col">Stato</th>
                    <th scope="col">Prenotazione</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="p in allPrenotations" v-if="dataValida(p.data)">
                    <td><div>{{p.corso}}</div></td>
                    <td><div>{{p.docente}}</div></td>
                    <td><div>{{p.data}}</div></td>
                    <td><div>{{p.slot_ora}}</div></td>
                    <td><div v-if="p.stato === '0'">Libera</div>
                        <div v-if="p.stato === '1'">Prenotata</div>
                        <!--le prenotazioni prenotate la cui data è gia passata le facciamo vedere solo nello storico delle prenotazioni -->
                        <!-- <div v-if="p.stato === '1' && !dataValida(p.data)">Effettuata</div> -->

                    <td><button type="button" class="btn btn-primary" v-if="p.stato === '0'" v-on:click="addPrenotation(p.codice)">Prenota</button>
                        <button type="button" class="btn btn-primary" v-if="p.stato === '1'" v-on:click="removePrenotation(p.codice)">Disdici prenotazione</button>
                        <!--le prenotazioni prenotate la cui data è gia passata le facciamo vedere solo nello storico delle prenotazioni-->

                    </td>
                </tr>

                </tbody>
            </table>
        </div>


        <!-- inizio schermata storico prenotazioni utenti registrati -->

        <div  v-if="setVisibleStorico==='2' && setVisibleLogin==='2'" class="column1" >
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col">Seleziona</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <button v-on:click="setVisibleStorico='1'; getRegisteredPrenotations() " type="button" id="StoricoUtenteRegistratoStorico" class="btn btn-primary">Tutte le prenotazioni</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
        </div>

        <div v-if="setVisibleStorico==='2' && setVisibleLogin==='2'" class="column2">
                <table class="table">
                    <thead class="thead-light">
                    <tr>
                        <!--  titoli della tabella  -->
                        <th scope="col">Materia</th>
                        <th scope="col">Professore</th>
                        <th scope="col">Giorno</th>
                        <th scope="col">Ora</th>
                        <th scope="col">Stato</th>
                        <th scope="col">Prenotazione</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr v-for="p in allPrenotations">
                        <td><div>{{p.corso}}</div></td>
                        <td><div>{{p.docente}}</div></td>
                        <td><div>{{p.data}}</div></td>
                        <td><div>{{p.slot_ora}}</div></td>
                        <td><div v-if="p.stato === '2'">Disdetta</div>
                            <div v-if="p.stato === '1' && dataValida(p.data)">Prenotata</div>
                            <div v-if="p.stato === '1' && !dataValida(p.data)">Sostenuta</div></td>
                        <td>
                            <button type="button" class="btn btn-primary" v-if="p.stato === '1' && isValido(p.corso, p.docente) && dataValida(p.data)" v-on:click="removePrenotationHistory(p.codice)">Disdici prenotazione</button>
                            <button type="button" class="btn btn-primary" v-if="p.stato === '1' && isValido(p.corso, p.docente) && !dataValida(p.data)" disabled>Sostenuta</button>
                            <button type="button" class="btn btn-primary" v-if="p.stato === '1' && !isValido(p.corso, p.docente)" v-on:click="removePrenotationHistory(p.codice)" disabled>Docente o corso cancellato</button>
                            <button type="button" class="btn btn-primary" v-if="p.stato === '2'" disabled>Disdetta</button>

                        </td>
                    </tr>

                    </tbody>
                </table>
            </div>



        <!--
        <div>
            PRENOTAZIONE{{allPrenotations}}
        </div>
        -->

        <!--
        <div v-for="p in allPrenotations">
            TEST{{p.codice}}
        </div>
        -->




    <!--  ---------------------------------------INIZIO SCHERMATA AMMINISTRATORI-----------------------------------  -->



    <div v-if="setVisibleLogin==='4'" id="logoutAmministratore" class="logout">
        {{newSearchUser}}
        <button type="button" v-on:click="setVisibleLogin='0'; registeredUserLogout()" class="btn btn-secondary"
                data-toggle="tooltip" data-placement="top" title="Tooltip on top">
            Logout
        </button>
    </div>


    <div v-if="setVisibleLogin==='4'" id="userScreenAmministratore" class="row">
        <div v-if="setVisibleStorico==='1'" class="column1">
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Seleziona</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton1Admin" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona materia
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterAdminMateria()" class="dropdown-item" href="#">Azzera materia</a>
                                <a v-on:click="filterAdminMateria(s.titolo)" class="dropdown-item" v-for="s in allSubjects">{{s.titolo}}</a>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton2Admin" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona professore
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterAdminProf()" class="dropdown-item" href="#">Azzera professore</a>
                                <a v-on:click="filterAdminProf(p.account)" class="dropdown-item" href="#" v-for="p in allProfs">{{p.nomeCognome}}</a>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton3Admin" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona giorno
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterAdminData()" class="dropdown-item" href="#">Azzera data</a>
                                <a v-on:click="filterAdminData('07/03/2022')" class="dropdown-item" href="#">07/03/2022</a>
                                <a v-on:click="filterAdminData('08/03/2022')" class="dropdown-item" href="#">08/03/2022</a>
                                <a v-on:click="filterAdminData('09/03/2022')" class="dropdown-item" href="#">09/03/2022</a>
                                <a v-on:click="filterAdminData('10/03/2022')" class="dropdown-item" href="#">10/03/2022</a>
                                <a v-on:click="filterAdminData('11/03/2022')" class="dropdown-item" href="#">11/03/2022</a>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                    id="dropdownMenuButton4Admin" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                Seleziona orario
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a v-on:click="filterAdminSlot('')" class="dropdown-item" href="#">Azzera orario</a>
                                <a v-on:click="filterAdminSlot('15:00-16:00')" class="dropdown-item" href="#">15:00-16:00</a>
                                <a v-on:click="filterAdminSlot('16:00-17:00')" class="dropdown-item" href="#">16:00-17:00</a>
                                <a v-on:click="filterAdminSlot('17:00-18:00')" class="dropdown-item" href="#">17:00-18:00</a>
                                <a v-on:click="filterAdminSlot('18:00-19:00')" class="dropdown-item" href="#">18:00-19:00</a>
                            </div>
                        </div>
                    </td>
                </tr>

                <tr v-if="showSearchUser==='0'">
                    <td>
                        <button type="button" class="btn btn-primary" v-on:click="showSearchUser='1'">Seleziona Utente</button>
                    </td>
                </tr>

                <tr v-if="showSearchUser==='1'">
                    <td>
                        <nav class="navbar navbar-light bg-light">
                            <button type="button" class="btn btn-primary" v-on:click="showSearchUser='0'">Indietro</button>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2" type="search" v-model="searchUser" placeholder="Search" aria-label="Search">
                                <button type="button" class="btn btn-outline-success" v-on:click="searchUserName()">Search</button>
                            </form>
                        </nav>
                        <div class="list-group">

                            <a href="#" class="list-group-item list-group-item-action" v-on:click="getAllUsers(); filterAdminUser()">Azzera utente</a>
                            <a href="#" class="list-group-item list-group-item-action" v-on:click="filterAdminUser(u.account)" v-for="u in allUsers">{{u.account}}</a>

                        </div>
                    </td>
                </tr>

                </tbody>
            </table>
            <!-- CIO SU CUI LAVORERO DOMANI PER FARE IL SELEZIONA UTENTE CON RICERCA -->
            <!-- Lo metto nel div dove adesso elenco tutti gli utenti -->




            <!-- ---------------------- INIZIO SECONDA TABELLA SINISTRA ---------------- -->

            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Modifica Database</th>
                </tr>
                </thead>
                <tbody>

                    <tr v-if="showRimuoviCorso==='0'">
                        <td>
                            <button type="button" class="btn btn-primary" v-on:click="showRimuoviCorso='1'">Rimuovi corso</button>
                        </td>
                    </tr>

                    <tr v-if="showRimuoviCorso==='1'">
                        <td>
                            <div class="list-group">
                                <button type="button" class="btn btn-primary" v-on:click="showRimuoviCorso ='0'">Indietro</button>
                                <a v-if="checkRimuoviCorso==='0'" href="#" v-on:click="salvaNomeCorsoRimuovere(s.titolo), checkRimuoviCorso='1'" class="list-group-item list-group-item-action" v-for="s in allSubjects">{{s.titolo}}</a>
                                <a v-if="checkRimuoviCorso==='1'" href="#" class="list-group-item list-group-item-action" >
                                    <span class="badge badge-pill badge-danger">Sei sicuro di voler rimuovere ?</span>
                                    <br>
                                    <button type="button" class="btn btn-success" v-on:click="showRimuoviCorso='0', checkRimuoviCorso='0'">NO</button>
                                    <button type="button" class="btn btn-danger" v-on:click="showRimuoviCorso='0', rimuoviCorso(), checkRimuoviCorso='0'">SI</button>
                                </a>
                            </div>
                        </td>
                    </tr>
                    <!-- il controllo v-if non lo faccio per un numero ma per il nome del corso -->


                    <tr v-if="showRimuoviProf==='0'">
                        <td>
                            <button type="button" class="btn btn-primary" v-on:click="showRimuoviProf='1'">Rimuovi professore</button>
                        </td>
                    </tr>

                    <tr v-if="showRimuoviProf==='1'">
                        <td>
                            <div class="list-group">
                                <button type="button" class="btn btn-primary" v-on:click="showRimuoviProf ='0'">Indietro</button>
                                <a v-if="checkRimuoviProf==='0'" href="#" v-on:click="salvaNomeProfRimuovere(p.account); checkRimuoviProf='1'" class="list-group-item list-group-item-action" v-for="p in allProfs">{{p.nomeCognome}}</a>
                                <a v-if="checkRimuoviProf==='1'" href="#" class="list-group-item list-group-item-action" >
                                    <span class="badge badge-pill badge-danger">Sei sicuro di voler rimuovere ?</span>
                                    <br>
                                    <button type="button" class="btn btn-success" v-on:click="showRimuoviProf='0'; checkRimuoviProf='0'">NO</button>
                                    <button type="button" class="btn btn-danger" v-on:click="showRimuoviProf='0'; rimuoviProf(); checkRimuoviProf='0'">SI</button>
                                </a>
                            </div>
                        </td>
                    </tr>


                    <tr v-if="showAddProf==='0'">
                        <td>
                            <button type="button" class="btn btn-primary" v-on:click="showAddProf='1'">Aggiungi professore</button>
                        </td>
                    </tr>

                    <tr v-if="showAddProf==='1'">
                        <td>
                            <button type="button" class="btn btn-primary" v-on:click="showAddProf ='0'">Indietro</button>
                            <form v-if="checkAddProf==='0'">
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">Inserisci Account</label>
                                    <input type="email" class="form-control" id="exampleFormControlInput1" v-model="addProfAccount" placeholder="b1">
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlInput2">Inserisci Nome e Cognome</label>
                                    <input type="email" class="form-control" id="exampleFormControlInput2" v-model="addProfNome" placeholder="Igor Miti">
                                </div>
                                <fieldset class="form-group">
                                    <div class="row">
                                        <legend class="col-form-label col-sm-2 pt-0">Stato</legend>
                                        <div class="col-sm-10">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="gridRadios" v-on:click="addProfAttivo ='1'" id="gridRadios1" value="option1">
                                                <label class="form-check-label" for="gridRadios1">
                                                    Professore Attivo
                                                </label>
                                            </div>
                                            <div class="form-check disabled">
                                                <input class="form-check-input" type="radio" name="gridRadios" v-on:click="addProfAttivo ='0'" id="gridRadios2" value="option2" checked>
                                                <label class="form-check-label" for="gridRadios2">
                                                    Professore Non Attivo
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                                <div class="form-group row">
                                    <div class="col-sm-10">
                                        <button type="button" class="btn btn-primary" v-on:click="checkAddProf='1'">Inserisci</button>
                                    </div>
                                </div>
                            </form>

                            <a v-if="checkAddProf==='1'" href="#" class="list-group-item list-group-item-action" >
                                <span class="badge badge-pill badge-danger">Sei sicuro di voler aggiungere? ?</span>
                                <br>
                                <button type="button" class="btn btn-success" v-on:click="showAddProf='0'; checkAddProf='0'">NO</button>
                                <button type="button" class="btn btn-danger" v-on:click="showAddProf='0'; addProf(); checkAddProf='0'">SI</button>
                            </a>
                        </td>
                    </tr>


                    <tr v-if="showAddCorso==='0'">
                        <td>
                            <button type="button" class="btn btn-primary" v-on:click="showAddCorso='1'">Aggiungi corso</button>
                        </td>
                    </tr>

                    <tr v-if="showAddCorso==='1'">
                        <td>
                            <button type="button" class="btn btn-primary" v-on:click="showAddCorso ='0'">Indietro</button>
                            <form v-if="checkAddCorso==='0'">
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">Inserisci nome corso</label>
                                    <input type="email" class="form-control" id="exampleFormControlInput11" v-model="addNomeCorso" placeholder="Programmazione">
                                </div>

                                <div class="form-group row">
                                    <div class="col-sm-10">
                                        <button type="button" class="btn btn-primary" v-on:click="checkAddCorso='1'">Inserisci</button>
                                    </div>
                                </div>
                            </form>

                            <a v-if="checkAddCorso==='1'" href="#" class="list-group-item list-group-item-action" >
                                <span class="badge badge-pill badge-danger">Sei sicuro di voler aggiungere? ?</span>
                                <br>
                                <button type="button" class="btn btn-success" v-on:click="showAddCorso='0'; checkAddCorso='0'">NO</button>
                                <button type="button" class="btn btn-danger" v-on:click="showAddCorso='0'; addCorso(); checkAddCorso='0'">SI</button>
                            </a>
                        </td>
                    </tr>


                    <tr v-if="showRimuoviAssociazione==='0'">
                        <td>
                            <button type="button" class="btn btn-primary" v-on:click="showRimuoviAssociazione='1'">Elimina Associazione</button>
                        </td>
                    </tr>

                    <tr v-if="showRimuoviAssociazione==='1'">
                        <td>
                            <div class="dropdown">
                                <button type="button" class="btn btn-primary" v-on:click="showRimuoviAssociazione ='0'">Indietro</button>
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Elimina Associazione
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <a class="dropdown-item" v-on:click="rimuoviAssociazione(i.codDocente, i.corso)" href="#" v-for="i in allInsegna">{{i.codDocente}}-{{i.corso}}</a>
                                </div>
                            </div>
                        </td>
                    </tr>


                    <tr v-if="showAddAssociazione==='0'">
                        <td>
                            <button type="button" class="btn btn-primary" v-on:click="showAddAssociazione='1'">Aggiungi Associazione</button>
                        </td>
                    </tr>

                    <tr v-if="showAddAssociazione==='1'">
                        <td>
                                <div class="dropdown" v-if="checkAddAssociazione==='0'">
                                    <button type="button" class="btn btn-primary" v-on:click="showAddAssociazione ='0'">Indietro</button>
                                    <br>
                                    <label>Scegli un professore</label>
                                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        {{profAssociazione}}
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <a class="dropdown-item" v-on:click="salvaProfAssociazione(p.account)" href="#" v-for="p in allProfs">{{p.nomeCognome}}</a>
                                    </div>
                                </div>

                                <br>
                                <br>
                                <br>
                                <br>

                                <div id="associazioneCorso" class="dropdown" v-if="checkAddAssociazione==='0'">

                                    <label>Scegli un corso</label>

                                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        {{corsoAssociazione}}
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <a class="dropdown-item" v-on:click="salvaCorsoAssociazione(c.titolo)" href="#" v-for="c in allSubjects">{{c.titolo}}</a>
                                    </div>

                                    <br>
                                    <br>
                                    <button type="button" class="btn btn-primary" v-on:click="checkAddAssociazione='1'">Aggiungi Associazione</button>

                                </div>

                            <a v-if="checkAddAssociazione==='1'" href="#" class="list-group-item list-group-item-action" >
                                <span class="badge badge-pill badge-danger">Sei sicuro di voler aggiungere? ?</span>
                                <br>
                                <button type="button" class="btn btn-success" v-on:click="showAddAssociazione='0'; checkAddAssociazione='0'">NO</button>
                                <button type="button" class="btn btn-danger" v-on:click="showAddAssociazione='0'; addAssociazione(); checkAddAssociazione='0'">SI</button>
                            </a>
                        </td>
                    </tr>

                </tbody>
            </table>


        </div>


        <div class="column2">
            <table class="table">
                <thead class="thead-light">
                <tr>
                    <!--  titoli della tabella  -->
                    <th scope="col">Materia</th>
                    <th scope="col">Professore</th>
                    <th scope="col">Giorno</th>
                    <th scope="col">Ora</th>
                    <th scope="col">Stato</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="p in allPrenotations">
                    <td><div>{{p.corso}}</div></td>
                    <td><div>{{p.docente}}</div></td>
                    <td><div>{{p.data}}</div></td>
                    <td><div>{{p.slot_ora}}</div></td>
                    <td><div v-if="p.stato === '2'">Disdetta da {{p.utente}}</div>
                        <div v-if="p.stato === '1'">Prenotato da {{p.utente}}</div>
                        <div v-if="p.stato === '0' && dataValida(p.data)">Libera</div>
                        <div v-if="p.stato === '0' && !dataValida(p.data)">Data scaduta</div></td>
                    <td>
                        <div v-if="!(prenCodeShow===p.codice) && !dataValida(p.data)">
                            <button type="button" class="btn btn-primary" v-if="p.stato === '0'" disabled>Data Scaduta</button>
                        </div>

                        <div v-if="!(prenCodeShow===p.codice) && dataValida(p.data)">
                            <button type="button" class="btn btn-primary" v-if="p.stato === '0'" v-on:click="prenCodeShow =p.codice" onclick="prenota(this)">Prenota per</button>
                        </div>

                        <div v-if="prenCodeShow===p.codice" class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton0" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Selezione utente
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <a class="dropdown-item" href="#" v-on:click="addPrenotationAdmin(p.codice, u.account), prenCodeShow='0'" v-for="u in allUsers">{{u.account}}</a>
                                </div>
                        </div>

                        <button type="button" class="btn btn-primary" v-if="p.stato === '2'" v-on:click="removePrenotationAdmin(p.codice), prenCodeShow=''" disabled>Prenotazione di {{p.utente}} disdetta</button>
                        <button type="button" class="btn btn-primary" v-if="p.stato === '1' && isValido(p.corso, p.docente) && dataValida(p.data)" v-on:click="removePrenotationAdmin(p.codice), prenCodeShow=''">Cancella prenotazione di {{p.utente}}</button>
                        <button type="button" class="btn btn-primary" v-if="p.stato === '1' && isValido(p.corso, p.docente) && !dataValida(p.data)" disabled>Prenotazione sostenuta da {{p.utente}}</button>
                        <button type="button" class="btn btn-primary" v-if="p.stato === '1' && !isValido(p.corso, p.docente)" v-on:click="removePrenotationAdmin(p.codice), prenCodeShow=''" disabled>Docente o corso cancellato</button>





                    </td>
                </tr>

                </tbody>
            </table>
        </div>

    </div>


</div>


<script>

    app=new Vue({
        el: '#loginScreen',
        data: {
            setVisibleLogin: '0',         //0 = login, 1=non registrati, 2=registrati, 3=docenti, 4=admin
            showSearchUser:'0',
            setVisiblePrenotations: '9999',
            showRimuoviCorso: '0',
            showRimuoviProf: '0',
            showAddProf: '0',
            checkAddProf:'0',
            showAddCorso:'0',
            checkAddCorso:'0',
            showRimuoviAssociazione: '0',
            showAddAssociazione: '0',
            checkAddAssociazione: '0',
            showRimuoviCorsoElem:[],
            username: '',
            password: '',
            risposta: 'falso',
            errorMessage:[],
            link:'ServletController',
            loginError:'',
            message: '',
            codLogin: 'login',
            codLogout: 'logout',
            codSubjects: 'availableSubjects',
            codPrenotations: 'viewOwnPrenotations',
            codAllPrenotations: 'viewAllPrenotations',
            codRimuoviCorso: 'eliminaCorso',
            codRimuoviProf: 'eliminaDocente',
            codRimuoviAssociazione:'rimuoviInsegna',
            codAddAssociazione:'inserisciInsegna',
            codPrenotazione:'effettuaPrenotazione',
            codDisdiciPrenotazione:'disdiciPrenotazione',
            allPrenotations:[],
            allSubjects:[],
            codProfs: 'filterProf',
            codAddProf: 'inserimentoDocente',
            codAddCorso:'inserimentoCorso',
            allProfs:[],
            allUsers:[],
            allInsegna:[],
            dataPren:'',
            oraPren:'',
            materiaPren:'',
            profPren:'',
            utentePren:'',
            searchUser:'',
            newSearchUser:[],
            newAllUsers:[],
            filterPrenCode:'filterPrenotations',
            filterAdminPrenCode:'filterAdminPrenotations',
            codOwnActPrenotations:'viewOwnActPrenotations',
            codInsegna:'getInsegna',
            codUsers:'stampaUtenti',
            setVisibleStorico:'1',
            corsoDaRimuovere:'',
            profDaRimuovere:'',
            checkRimuoviCorso:'0',
            checkRimuoviProf:'0',
            addProfNome:'',
            addProfAccount:'',
            addProfAttivo:'0',
            addNomeCorso:'',
            profAssociazione:'',
            corsoAssociazione:'',
            prenCodeShow:'0',
            dataAttuale:'08/03/2022',
        },
        /*
        mounted:function(){
            this.getRegisteredPrenotations();
        },
        */




        methods: {

            registeredUserLogout:function(){
                console.log("sono nel logout");
                let self = this;
                $.post("ServletController", { "username": this.username, "password": this.password, "invia":this.codLogout }).then(function (data) {
                    self.risposta=data;
                    console.log('logout = '+self.risposta);
                    self.message=self.risposta;
                    //devo mettere QUA un modo per printare nella schermata di login "LOGOUT EFFETTUATO CON SUCCESSO", e potrei usare la textbox che mi dice login fallito, mettendogli un messaggio generico dentro e cambiandolo


                });
            },

            login:function() {
                let self = this;

                //fare una funzione che quando schiaccio il pulsante di logout mi richiama dei metodi nella servlet che effettivamente mi fanno fare il logout, cosi posso poi fare il login



                //NB quando sto cercando di vedere se uno slot di un prof e materia è libero io devo controllare anche che il professore che ha quello slot non sia gia impegnato nella stessa ora per un altra materia.

                $.post("ServletController", { "username": this.username, "password": this.password, "invia":this.codLogin },function (data) {
                    self.risposta = data;
                    console.log("Risposta1 "+data);
                    console.log("Risposta2 "+self.risposta);
                    console.log("Risposta2 "+this.risposta);
                    console.log('FINE PRIMA POST');

                    if(self.risposta==='utenteRegistrato'){
                        console.log("vis0.1 "+this.setVisibleLogin);    //li vedo entrambi, this e self
                        console.log("vis0.2 "+self.setVisibleLogin);
                        self.getRegisteredPrenotations();
                        self.getAllSubjects();
                        self.getAllProfs() ;
                        self.setVisibleLogin='2';

                    }else if(self.risposta==='admin'){
                        self.setVisibleLogin='4';
                        console.log("vis0.3 "+this.setVisibleLogin);    //li vedo entrambi, this e self
                        console.log("vis0.4 "+self.setVisibleLogin);
                        self.filterAdminPrenotations();
                        self.getAllSubjects();
                        self.getAllProfs() ;
                        self.getAllUsers();
                        self.getAllInsegna();

                    }else if(self.risposta==='Guest'){
                        console.log("vis0.3 "+this.setVisibleLogin);    //li vedo entrambi, this e self
                        console.log("vis0.4 "+self.setVisibleLogin);
                        self.getAllPrenotations();
                        self.getAllSubjects();
                        self.getAllProfs() ;
                        self.setVisibleLogin='1';

                    }else /*if(self.risposta==='Login Errato')*/{
                        //devo printare sul sito un messaggio di errore
                        //AKA faccio apparire un div rigorosamente rosso
                        self.message=self.risposta;
                        self.loginError='vero';
                    }

                });

            },

            getAllPrenotations:function(){
                let self = this;
                console.log("sono in get all prenotations");
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codAllPrenotations},function (data2) {
                    console.log('sono nella post get prenotations');
                    self.allPrenotations = data2;
                });
            },

            getRegisteredPrenotations:function(){
                let self = this;
                console.log("sono in get registered prenotations");
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codPrenotations},function (data2) {
                    console.log('sono nella post get prenotations');
                    self.allPrenotations = data2;
                });

            },

            getAllSubjects:function(){
                let self = this;
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codSubjects},function (data3) {
                    self.allSubjects = data3;
                    console.log(data3);
                });
                //setTimeout(function () { this.fetchHole() }.bind(this), 1000);
                console.log("sono in get all subjects");
            },

            getAllProfs:function(){
                let self = this;
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codProfs},function (data4) {
                    self.allProfs = data4;
                    console.log(data4);
                });
                //setTimeout(function () { this.fetchHole() }.bind(this), 1000);
                console.log("sono in get all profs");
            },

            getAllUsers:function(){
                let self = this;
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codUsers},function (data4) {
                    self.allUsers = data4;
                    console.log(data4);
                });
                //setTimeout(function () { this.fetchHole() }.bind(this), 1000);
                console.log("sono in get all users");
            },

            filterPrenotations:function(){
                let self = this;
                console.log("sono in filterPrenotations");
                console.log("datapren = "+self.data);
                console.log("orapren = "+self.oraPren);
                console.log("profpren = "+self.profPren);

                $.get("ServletController", {"username": this.username, "password": this.password, "materia":self.materiaPren, "docente":self.profPren, "data":self.data, "slot_ora":self.oraPren, "invia": this.filterPrenCode},function (data5) {
                    self.allPrenotations = data5;
                    console.log("finita la getFilteredPrenotations");
                    console.log(data5);
                });

            },

            filterAdminPrenotations:function(){
                let self = this;
                console.log("sono in filterAdminPrenotations");
                console.log("datapren = "+self.data);
                console.log("orapren = "+self.oraPren);
                console.log("profpren = "+self.profPren);
                console.log("utentePren = "+self.utentePren);

                $.get("ServletController", {"username": this.username, "password": this.password, "materia":self.materiaPren, "docente":self.profPren, "data":self.data, "slot_ora":self.oraPren, "utente":self.utentePren, "invia": this.filterAdminPrenCode},function (data5) {
                    self.allPrenotations = data5;
                    console.log("finita la getFilteredPrenotations");
                    console.log(data5);
                });

            },

            filterData:function(dataa){
                let self = this;
                self.data = dataa;
                console.log("sono in filterData");
                this.filterPrenotations();
            },

            filterSlot:function(slott){
                let self = this;
                self.oraPren = slott;
                console.log("sono in filterSlot");
                this.filterPrenotations();
            },

            filterProf:function(proff){
                let self = this;
                self.profPren = proff;
                console.log("sono in filterProf = "+self.profPren);
                this.filterPrenotations();
            },

            filterMateria:function(materiaa){
                let self = this;
                self.materiaPren=materiaa;
                console.log("sono in filterProf = "+self.materiaPren);
                this.filterPrenotations();
            },

            filterAdminData:function(dataa){
                let self = this;
                self.data = dataa;
                console.log("sono in filterData");
                this.filterAdminPrenotations();
            },

            filterAdminSlot:function(slott){
                let self = this;
                self.oraPren = slott;
                console.log("sono in filterSlot");
                this.filterAdminPrenotations();
            },

            filterAdminProf:function(proff){
                let self = this;
                self.profPren = proff;
                console.log("sono in filterProf = "+self.profPren);
                this.filterAdminPrenotations();
            },

            filterAdminMateria:function(materiaa){
                let self = this;
                self.materiaPren=materiaa;
                console.log("sono in filterProf = "+self.materiaPren);
                this.filterAdminPrenotations();
            },

            filterAdminUser:function(utentee){
                let self = this;
                self.utentePren=utentee;
                console.log("sono in filterProf = "+self.utentePren);
                this.filterAdminPrenotations();
            },

            getOwnActPrenotations:function(){
                let self = this;
                console.log("sono in get OWN registered prenotations");
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codOwnActPrenotations},function (data2) {
                    console.log('sono nella post get OWN prenotations');
                    self.allPrenotations = data2;
                });
            },


            searchUserName:function(){
                let self = this;
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codUsers},function (data4) {
                    self.newSearchUser = data4;
                });
                setTimeout(function(){
                    let j = 0;
                    for(let i = 0; i<self.newSearchUser.length; i++){
                        console.log("sono nel for"+self.newSearchUser[i].account);
                        if(self.newSearchUser[i].account === this.searchUser) {
                            console.log("sono nel for"+self.newSearchUser[i].account);
                            self.newAllUsers[j] = self.newSearchUser[i];
                            j++;
                        }
                    };
                    this.allUsers = self.newAllUsers;
                    self.newSearchUser = [];
                    self.newAllUsers = [];
                }.bind(this), 10);


            },

            salvaNomeCorsoRimuovere:function(titolo){
                let self = this;
                self.corsoDaRimuovere = titolo;
            },

            rimuoviCorso:function(){
                let self = this;
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codRimuoviCorso, "titolo": self.corsoDaRimuovere}, function (data3) {
                    console.log(data3);
                });

                setTimeout(function() {

                    //aggiorno prenotazioni
                    $.get("ServletController", {"username": this.username, "password": this.password, "materia":self.materiaPren, "docente":self.profPren, "data":self.data, "slot_ora":self.oraPren, "utente":self.utentePren, "invia": this.filterAdminPrenCode},function (data5) {
                        self.allPrenotations = data5;
                        console.log("finita la getFilteredPrenotations");
                        console.log(data5);
                    });
                    //aggiorno materie nel filtro
                    $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codSubjects},function (data3) {
                        self.allSubjects = data3;
                        console.log(data3);
                    });

                }.bind(this), 10);

            },

            salvaNomeProfRimuovere:function(nome){
                let self = this;
                self.profDaRimuovere = nome;
            },

            rimuoviProf:function(){
                let self = this;
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codRimuoviProf, "account": self.profDaRimuovere}, function (data3) {
                    console.log(data3);
                });

                setTimeout(function() {
                    //aggiorno prenotazioni
                    $.get("ServletController", {"username": this.username, "password": this.password, "materia":self.materiaPren, "docente":self.profPren, "data":self.data, "slot_ora":self.oraPren, "utente":self.utentePren, "invia": this.filterAdminPrenCode},function (data5) {
                        self.allPrenotations = data5;
                        console.log("finita la getFilteredPrenotations");
                        console.log(data5);
                    });
                    //aggiorno professori nel filtro
                    $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codProfs},function (data4) {
                        self.allProfs = data4;
                        console.log(data4);
                    });

                }.bind(this), 10);

            },

            addProf:function(){
                let self = this;
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codAddProf, "account": self.addProfAccount, "nomeCognome": self.addProfNome, "attivo": self.addProfAttivo},function (data4) {
                    console.log("addprof = "+data4);
                });
            },

            addCorso:function(){
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codAddCorso, "corso": this.addNomeCorso},function (data4) {
                    console.log("addCorso = "+data4);
                });
            },

            getAllInsegna:function(){
                let self = this;
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codInsegna},function (data4) {
                    console.log("addCorso = "+data4);
                    self.allInsegna = data4;
                });
            },

            rimuoviAssociazione:function(codDocente, corso){
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codRimuoviAssociazione, "codDocente": codDocente, "titolo": corso},function (data4) {
                    console.log("addCorso = "+data4);
                });
            },

            salvaProfAssociazione:function(prof){
                let self = this;
                self.profAssociazione = prof;
            },

            salvaCorsoAssociazione:function(corso){
                let self = this;
                self.corsoAssociazione = corso;
            },

            addAssociazione:function(){
                let self = this;
                console.log("sono in addAssociazioneeeee"+self.profAssociazione + self.corsoAssociazione);
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codAddAssociazione, "codDocente": self.profAssociazione, "corso": self.corsoAssociazione},function (data4) {
                    console.log("addAssociazione = "+data4);
                });
            },

            addPrenotation:function(codice){
                let self = this;
                console.log("sono in addPrenotations" + codice + this.username);
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codPrenotazione, "codice":codice, "utente": this.username},function (data4) {
                    console.log("addPrenotazione = "+data4);
                });

                setTimeout(function() {

                    //aggiorno prenotazioni
                    $.get("ServletController", {"username": this.username, "password": this.password, "materia":self.materiaPren, "docente":self.profPren, "data":self.data, "slot_ora":self.oraPren, "invia": this.filterPrenCode},function (data5) {
                        self.allPrenotations = data5;
                        console.log("finita la getFilteredPrenotations");
                        console.log(data5);
                    });

                }.bind(this), 1000);
            },

            addPrenotationAdmin:function(codice, account){
                let self = this;
                console.log("sono in addPrenotationsAdmin" + codice + account);
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codPrenotazione, "codice":codice, "utente": account},function (data4) {
                    console.log("addPrenotazione = "+data4);
                });

                setTimeout(function() {

                    //aggiorno prenotazioni
                    $.get("ServletController", {"username": this.username, "password": this.password, "materia":self.materiaPren, "docente":self.profPren, "data":self.data, "slot_ora":self.oraPren, "utente":self.utentePren, "invia": this.filterAdminPrenCode},function (data5) {
                        self.allPrenotations = data5;
                        console.log("finita la getFilteredPrenotations");
                        console.log(data5);
                    });

                }.bind(this), 1000);

            },


            removePrenotation:function(codice){
                let self = this;
                console.log("sono in removePrenotations" + codice);
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codDisdiciPrenotazione, "codice":codice},function (data4) {
                    console.log("addPrenotazione = "+data4);
                });

                setTimeout(function() {

                    //aggiorno prenotazioni
                    $.get("ServletController", {"username": this.username, "password": this.password, "materia":self.materiaPren, "docente":self.profPren, "data":self.data, "slot_ora":self.oraPren, "invia": this.filterPrenCode},function (data5) {
                        self.allPrenotations = data5;
                        console.log("finita la getFilteredPrenotations");
                        console.log(data5);
                    });

                }.bind(this), 1000);
            },


            removePrenotationAdmin:function(codice){
                let self = this;
                console.log("sono in removePrenotations" + codice);
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codDisdiciPrenotazione, "codice":codice},function (data4) {
                    console.log("addPrenotazione = "+data4);
                });

                setTimeout(function() {

                    //aggiorno prenotazioni
                    $.get("ServletController", {"username": this.username, "password": this.password, "materia":self.materiaPren, "docente":self.profPren, "data":self.data, "slot_ora":self.oraPren, "utente":self.utentePren, "invia": this.filterAdminPrenCode},function (data5) {
                        self.allPrenotations = data5;
                        console.log("finita la getFilteredPrenotations");
                        console.log(data5);
                    });

                }.bind(this), 1000);
            },


            removePrenotationHistory:function(codice){
                let self = this;
                console.log("sono in removePrenotations" + codice);
                $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codDisdiciPrenotazione, "codice":codice},function (data4) {
                    console.log("addPrenotazione = "+data4);
                });

                setTimeout(function() {

                    //aggiorno prenotazioni
                    $.get("ServletController", {"username": this.username, "password": this.password, "invia": this.codOwnActPrenotations},function (data2) {
                        console.log('sono nella post get OWN prenotations');
                        self.allPrenotations = data2;
                    });

                }.bind(this), 1000);
            },

            dataValida:function(dataPrenotaz){
                let self = this;
                console.log("sono nel coso per vedere se la prenotazione è scaduta");
                let dataPr=dataPrenotaz[6].concat(dataPrenotaz[7].concat(dataPrenotaz[8].concat(dataPrenotaz[9])));
                console.log("Data CONCATENATA = "+ dataPr);
                let dataAct = self.dataAttuale[6].concat(self.dataAttuale[7].concat(self.dataAttuale[8].concat(self.dataAttuale[9])));
                if(dataAct > dataPr){   //controllo dell anno
                    return false;
                }else{                  //controllo del mese
                    let dataPr=dataPrenotaz[3].concat(dataPrenotaz[4]);
                    let dataAct = self.dataAttuale[3].concat(self.dataAttuale[4]);
                    if(dataAct > dataPr){
                        return false;
                    }else{
                        let dataPr=dataPrenotaz[0].concat(dataPrenotaz[1]);
                        let dataAct = self.dataAttuale[0].concat(self.dataAttuale[1]);
                        if(dataAct >= dataPr){
                            return false;
                        }else{
                            return true;
                        }
                    }
                }


                },


            isValido:function(corso, docente){
                let self = this;
                let j = 0;
                let k = 0;
                for(let i = 0; i<self.allSubjects.length; i++) {
                    if(corso === self.allSubjects[i].titolo){
                        j = 1;
                    }
                }
                for(let i = 0; i<self.allProfs.length; i++) {
                    if(docente === self.allProfs[i].account){
                        k = 1;
                    }
                }
                if(j === 1 && k === 1)
                    return true;
                else
                    return false;
            },


            /*
            getError(){
                var self = this;
                console.log("dopo self");
                $.get("ServletController", function(data) {
                    console.log("dopo get");
                    self.errorMessage = data;
                    console.log("getError funtion terminata");
                });
                console.log("get terminata");
            }
            */
        }
    });
</script>
<script type="text/javascript">(function(){window['__CF$cv$params']={r:'6da386ef8a275a31',m:'3rL.fud4n.f99SrlZN6LTG5AKwOzFwM_MvG6TOdPl4o-1644309353-0-AWNPuc/s9PCbZkzph/V1BQ4DdztvvMfQ5AdBmdz7a3WgXjkPDRc6F7ot2CjvK74lYjAtbc99hus2s38HPXWEdQg6V9KA//FaoGIRigG0dF6MhwVyk702Pl27nn/XkSI6k9TqrL5jAzqf/j8N9vzCMyWPyWJU7nVavay0n5XVac+w4+6NlF76xselqoll8o78DA==',s:[0x072d80e02a,0x6e1dc2f7d6],}})();</script></body>

</html>